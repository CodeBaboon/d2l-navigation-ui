<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-icon/iron-icon.html">
<link rel="import" href="../../d2l-dropdown/dropdown.html">
<link rel="import" href="../../vui-colors/colors.html">
<link rel="import" href="../button-highlight-icon.html">
<link rel="import" href="../divider.html">
<link rel="import" href="../graft-behavior.html">
<link rel="import" href="../icons.html">
<link rel="import" href="../shared-styles.html">
<dom-module id="d2l-navigation-header-course">
	<style include="vui-colors d2l-navigation-shared-styles">
		:host {
			-webkit-align-items: center;
			-ms-flex-align: center;
			align-items: center;
			display: -ms-flexbox;
			display: -webkit-flex;
			display: flex;
			height: 100%;
			margin: -7px;
			overflow: hidden;
			padding: 0 7px;
		}
		.d2l-navigation-header-course-home,
		#d2l-navigation-header-course-menu-opener,
		.d2l-navigation-header-course-div2 {
			-ms-flex: 0 0 auto;
			-webkit-flex: 0 0 auto;
			flex: 0 0 auto;
		}
		.d2l-navigation-link {
			display: block;
			font-size: 1.5rem;
			-ms-flex: 0 1 auto;
			-webkit-flex: 0 1 auto;
			flex: 0 1 auto; /* IE10 defaults to 0 0 auto */
			overflow: hidden;
			line-height: normal;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
	</style>
	<template>
		<button
			is="d2l-navigation-button-highlight-icon"
			icon="navigation-t3:home"
			on-tap="_handleMyHome"
			class="d2l-navigation-header-course-home"></button>
		<d2l-navigation-divider></d2l-navigation-divider>
		<a href$="[[orgUnitHome]]" class="d2l-navigation-link">
			[[orgUnitName]]
		</a>
		<d2l-navigation-divider small class="d2l-navigation-header-course-div2"></d2l-navigation-divider>
		<button
			is="d2l-navigation-button-highlight-icon"
			icon="navigation-t1:arrow-down"
			id="d2l-navigation-course-menu-opener"
			on-tap="open"></button>
		<d2l-dropdown
			target-id="d2l-navigation-course-menu-opener"
			on-open="_handleOpen"
			on-close="_handleClose">
			<div id="d2l-navigation-course-menu-placeholder"></div>
		</d2l-dropdown>
	</template>
</dom-module>
<script>
	Polymer({
		is: 'd2l-navigation-header-course',
		properties: {
			myHome: String,
			orgUnitHome: String,
			orgUnitName: String
		},
		behaviors: [window.D2L.PolymerBehaviors.NavigationGraftBehavior],
		open: function() {
			this.$$('d2l-dropdown').setAttribute('opened', 'opened');
			this.graft('d2l-navigation-course-menu-placeholder');
		},
		_handleMyHome: function() {
			document.location.href = this.myHome;
		},
		_handleOpen: function() {
			var opener = this.$$('#d2l-navigation-course-menu-opener');
			Polymer.dom(opener).setAttribute('active', 'active');
		},
		_handleClose: function() {
			var opener = this.$$('#d2l-navigation-course-menu-opener');
			Polymer.dom(opener).removeAttribute('active');
		}
	});
</script>
