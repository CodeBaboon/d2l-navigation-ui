<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="item-group.html">
<link rel="import" href="item-link.html">
<dom-module id="navigation-items">
	<style>
		:host {
			display: block;
			min-height: 70px;
		}
	</style>
	<template>
	</template>
</dom-module>
<script>
	Polymer({
		is: 'navigation-items',
		properties: {
			items: {
				type: Array,
				observer: '_updateItems'
			}
		},
		hostAttributes: {
			role: 'list'
		},
		_updateItems: function() {
			this.items.forEach(function(item) {
				var elem = this._createItemElem(item);
				if (elem) {
					Polymer.dom(this.root).appendChild(elem);
				}
			}.bind(this));
		},
		_createItemElem: function(item) {

			var elem;
			if (item.class.indexOf('link') > 0) {
				elem = document.createElement('navigation-item-link');
				item.links.forEach(function(l) {
					if (l.rel.indexOf('self') > -1) {
						elem.setAttribute('href', l.href);
					}
				});
			} else if (item.class.indexOf('group') > 0) {
				elem = document.createElement('navigation-item-group');
				item.entities.forEach(function(childItem) {
					var childElem = this._createItemElem(childItem);
					if (childElem) {
						Polymer.dom(elem).appendChild(childElem);
					}
				}.bind(this))
			}

			if (!elem) {
				return null;
			}

			elem.setAttribute('text', item.properties.text);

			return elem;

		}
	});
</script>
